# Configurações para Libido Renovada - Contornar bloqueio de segurança

# Desabilitar mod_access_compat que está causando o bloqueio
<IfModule mod_access_compat.c>
    # Permitir acesso a todos os arquivos PHP
    <Files "*.php">
        Order allow,deny
        Allow from all
    </Files>
</IfModule>

# Habilitar PHP - múltiplas tentativas
<IfModule mime_module>
    AddHandler application/x-httpd-php .php
    AddHandler application/x-httpd-php80 .php
    AddHandler application/x-httpd-php81 .php
    AddHandler application/x-httpd-php82 .php
    AddHandler application/x-httpd-ea-php80 .php
    AddHandler application/x-httpd-ea-php81 .php
    AddHandler application/x-httpd-ea-php82 .php
    AddHandler application/x-httpd-ea-php83 .php
</IfModule>

# Forçar execução de PHP
<Files "*.php">
    SetHandler application/x-httpd-php
</Files>

# Configurações de segurança mais permissivas
<DirectoryMatch ".*">
    <Files "*.php">
        Order allow,deny
        Allow from all
    </Files>
</DirectoryMatch>

# Rewrite rules
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Permitir acesso a todos os arquivos PHP
    RewriteRule ^.*\.php$ - [L]
    
    # Bloquear acesso direto a includes sensíveis
    RewriteRule ^includes/ - [F]
</IfModule>

# Logs PHP personalizados
php_value log_errors On
php_value error_log "logs/php-error.log"

# Configurações de segurança
<Files "*.log">
    Order allow,deny
    Deny from all
</Files>

<Files ".htaccess">
    Order allow,deny
    Deny from all
</Files>

# Permitir acesso a arquivos de teste
<Files "test.php">
    Order allow,deny
    Allow from all
</Files>

<Files "status.php">
    Order allow,deny
    Allow from all
</Files>

<Files "status.txt">
    Order allow,deny
    Allow from all
</Files>