<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - √Årea de Membros</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
        .log-entry { background: #f8f9fa; border: 1px solid #dee2e6; padding: 10px; margin: 5px 0; border-radius: 5px; font-family: monospace; font-size: 12px; }
        .btn { background: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #0056b3; }
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #218838; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Debug - √Årea de Membros</h1>
        
        <div class="status info">
            <strong>‚ÑπÔ∏è Status do Sistema:</strong><br>
            ‚Ä¢ Data: <span id="current-date"></span><br>
            ‚Ä¢ Hora: <span id="current-time"></span><br>
            ‚Ä¢ Status: Online (HTML/JavaScript)<br>
            ‚Ä¢ PHP: Bloqueado pelo servidor<br>
            ‚Ä¢ Solu√ß√£o: API JavaScript implementada
        </div>

        <h2>üß™ Testes do Sistema</h2>
        <div>
            <button class="btn" onclick="testAPI()">Testar API</button>
            <button class="btn" onclick="testLogin()">Testar Login</button>
            <button class="btn" onclick="testPurchase()">Testar Compra</button>
            <button class="btn" onclick="testFiles()">Testar Arquivos</button>
            <button class="btn btn-success" onclick="clearLogs()">Limpar Logs</button>
        </div>

        <h2>üìä Resultados dos Testes</h2>
        <div id="test-results"></div>

        <h2>üìù Logs do Sistema</h2>
        <div id="logs-container"></div>

        <h2>üîó Links de Teste</h2>
        <div>
            <a href="index.html" class="btn">üè† Dashboard</a>
            <a href="login.html" class="btn">üîê Login</a>
            <a href="status.html" class="btn">üìä Status</a>
            <a href="status.txt" class="btn">üìÑ Status TXT</a>
        </div>

        <h2>‚ö†Ô∏è Problemas Identificados</h2>
        <div class="status error">
            <strong>‚ùå PHP Bloqueado:</strong><br>
            O servidor est√° bloqueando a execu√ß√£o de arquivos PHP. Os arquivos s√£o baixados em vez de executados.<br>
            <strong>Solu√ß√£o Implementada:</strong> Sistema completo em HTML/JavaScript que simula todas as funcionalidades PHP.
        </div>

        <div class="status warning">
            <strong>‚ö†Ô∏è Funcionalidades Limitadas:</strong><br>
            ‚Ä¢ Banco de dados: Simulado em JavaScript<br>
            ‚Ä¢ Webhooks: Simulados (n√£o funcionais)<br>
            ‚Ä¢ Downloads: Simulados (n√£o funcionais)<br>
            ‚Ä¢ Logs: Salvos no localStorage do navegador
        </div>

        <h2>‚úÖ Funcionalidades Implementadas</h2>
        <div class="status success">
            ‚Ä¢ Sistema de login/logout<br>
            ‚Ä¢ Dashboard responsivo<br>
            ‚Ä¢ Listagem de e-books e √°udios<br>
            ‚Ä¢ Controle de permiss√µes (7 dias)<br>
            ‚Ä¢ Sistema de logs<br>
            ‚Ä¢ Interface moderna e funcional
        </div>

        <h2>üöÄ Pr√≥ximos Passos</h2>
        <div class="status info">
            1. <strong>Teste o sistema:</strong> Use as credenciais de teste<br>
            2. <strong>Configure o servidor:</strong> Resolva o bloqueio de PHP<br>
            3. <strong>Implemente backend real:</strong> Substitua simula√ß√µes por PHP funcional<br>
            4. <strong>Configure webhooks:</strong> Integre com Hotmart
        </div>
    </div>

    <script src="api.js"></script>
    <script>
        // Atualizar data e hora
        function updateDateTime() {
            const now = new Date();
            document.getElementById('current-date').textContent = now.toLocaleDateString('pt-BR');
            document.getElementById('current-time').textContent = now.toLocaleTimeString('pt-BR');
        }
        
        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Carregar logs
        function loadLogs() {
            const logs = memberAPI.getLogs();
            const container = document.getElementById('logs-container');
            
            if (logs.length === 0) {
                container.innerHTML = '<div class="log-entry">Nenhum log encontrado</div>';
                return;
            }
            
            container.innerHTML = logs.map(log => `<div class="log-entry">${log}</div>`).join('');
        }

        // Limpar logs
        function clearLogs() {
            memberAPI.clearLogs();
            loadLogs();
            showResult('Logs limpos com sucesso!', 'success');
        }

        // Mostrar resultado
        function showResult(message, type = 'info') {
            const container = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = `<strong>${type.toUpperCase()}:</strong> ${message}`;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        // Testar API
        async function testAPI() {
            try {
                showResult('Testando API...', 'info');
                
                // Testar login
                const loginResult = await memberAPI.login('admin@exemplo.com', '123456');
                if (loginResult.success) {
                    showResult('‚úÖ Login funcionando', 'success');
                } else {
                    showResult('‚ùå Login falhou', 'error');
                }
                
                // Testar compra
                const purchaseResult = await memberAPI.checkPurchase(1);
                if (purchaseResult.hasPurchase) {
                    showResult('‚úÖ Verifica√ß√£o de compra funcionando', 'success');
                } else {
                    showResult('‚ùå Verifica√ß√£o de compra falhou', 'error');
                }
                
                // Testar e-books
                const ebooks = await memberAPI.getEbooks();
                if (ebooks.length > 0) {
                    showResult(`‚úÖ E-books carregados: ${ebooks.length} itens`, 'success');
                } else {
                    showResult('‚ùå E-books n√£o carregados', 'error');
                }
                
                // Testar √°udios
                const audios = await memberAPI.getAudios();
                if (audios.length > 0) {
                    showResult(`‚úÖ √Åudios carregados: ${audios.length} itens`, 'success');
                } else {
                    showResult('‚ùå √Åudios n√£o carregados', 'error');
                }
                
                showResult('Teste da API conclu√≠do!', 'success');
                
            } catch (error) {
                showResult('‚ùå Erro no teste da API: ' + error.message, 'error');
            }
        }

        // Testar login
        async function testLogin() {
            try {
                showResult('Testando login...', 'info');
                
                const result = await memberAPI.login('admin@exemplo.com', '123456');
                if (result.success) {
                    showResult('‚úÖ Login admin funcionando', 'success');
                } else {
                    showResult('‚ùå Login admin falhou', 'error');
                }
                
                const result2 = await memberAPI.login('veramdssoares@gmail.com', 'Jw5$Gp8ews');
                if (result2.success) {
                    showResult('‚úÖ Login Vera funcionando', 'success');
                } else {
                    showResult('‚ùå Login Vera falhou', 'error');
                }
                
                // Testar login inv√°lido
                const result3 = await memberAPI.login('teste@teste.com', '123456');
                if (!result3.success) {
                    showResult('‚úÖ Valida√ß√£o de login funcionando', 'success');
                } else {
                    showResult('‚ùå Valida√ß√£o de login falhou', 'error');
                }
                
            } catch (error) {
                showResult('‚ùå Erro no teste de login: ' + error.message, 'error');
            }
        }

        // Testar compra
        async function testPurchase() {
            try {
                showResult('Testando verifica√ß√£o de compra...', 'info');
                
                const result = await memberAPI.checkPurchase(1);
                if (result.hasPurchase) {
                    showResult('‚úÖ Compra encontrada', 'success');
                    if (result.canDownload) {
                        showResult('‚úÖ Download liberado', 'success');
                    } else {
                        showResult(`‚è≥ Download bloqueado por ${result.daysLeft} dias`, 'warning');
                    }
                } else {
                    showResult('‚ùå Compra n√£o encontrada', 'error');
                }
                
            } catch (error) {
                showResult('‚ùå Erro no teste de compra: ' + error.message, 'error');
            }
        }

        // Testar arquivos
        async function testFiles() {
            try {
                showResult('Testando carregamento de arquivos...', 'info');
                
                const ebooks = await memberAPI.getEbooks();
                const audios = await memberAPI.getAudios();
                
                showResult(`‚úÖ E-books: ${ebooks.length} arquivos`, 'success');
                showResult(`‚úÖ √Åudios: ${audios.length} arquivos`, 'success');
                
                // Testar download simulado
                const downloadResult = await memberAPI.downloadFile('ebook', 'teste.pdf');
                if (downloadResult.success) {
                    showResult('‚úÖ Download simulado funcionando', 'success');
                } else {
                    showResult('‚ùå Download simulado falhou', 'error');
                }
                
            } catch (error) {
                showResult('‚ùå Erro no teste de arquivos: ' + error.message, 'error');
            }
        }

        // Carregar logs ao iniciar
        loadLogs();
        
        // Atualizar logs a cada 5 segundos
        setInterval(loadLogs, 5000);
    </script>
</body>
</html>
